From 14c35ce7c1b9649bef14efeb3121660e541dd97a Mon Sep 17 00:00:00 2001
From: Thomas Hindoe Paaboel Andersen <phomes@gmail.com>
Date: Tue, 30 Sep 2014 23:30:30 +0200
Subject: [PATCH] test-date: don't fail test if log_max_level is higher than
 LOG_INFO

---
 src/test/test-date.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/src/test/test-date.c b/src/test/test-date.c
index 0586b78b6d..00b569080c 100644
--- a/src/test/test-date.c
+++ b/src/test/test-date.c
@@ -28,7 +28,8 @@ static void test_one(const char *p) {
         char buf[FORMAT_TIMESTAMP_MAX], buf_relative[FORMAT_TIMESTAMP_RELATIVE_MAX];
 
         assert_se(parse_timestamp(p, &t) >= 0);
-        log_info("%s", format_timestamp(buf, sizeof(buf), t));
+        format_timestamp(buf, sizeof(buf), t);
+        log_info("%s", buf);
 
         /* Chop off timezone */
         *strrchr(buf, ' ') = 0;
@@ -36,7 +37,8 @@ static void test_one(const char *p) {
         assert_se(parse_timestamp(buf, &q) >= 0);
         assert_se(q == t);
 
-        log_info("%s", strna(format_timestamp_relative(buf_relative, sizeof(buf_relative), t)));
+        format_timestamp_relative(buf_relative, sizeof(buf_relative), t);
+        log_info("%s", strna(buf_relative));
         assert_se(parse_timestamp(buf, &q) >= 0);
 }
 
